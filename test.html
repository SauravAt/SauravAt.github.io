<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Magic Valentine</title>
<style>
  body {
    margin: 0;
    background: #000;
    overflow: hidden;
    font-family: 'Georgia', serif;
  }

  /* Portal container */
  #portal {
    position: fixed;
    width: 260px;
    height: 260px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    overflow: hidden;
    background: radial-gradient(circle, rgba(255,200,220,0.6), rgba(255,170,200,0.3), transparent 65%);
    box-shadow: 0 0 40px rgba(255,180,210,0.6);
    z-index: 1;
  }

  /* Stars canvas */
  #portalStars {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* Rounded image */
  #herImage {
    position: absolute;
    width: 140px;
    height: 140px;
    border-radius: 50%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) scale(0.7);
    opacity: 0;
    object-fit: cover;
    z-index: 10;
    box-shadow: 0 0 25px rgba(255,180,210,0.8);
    transition: opacity 3s ease, transform 6s ease;
  }

  /* Breathing animation */
  @keyframes breathe {
    0% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.03); }
    100% { transform: translate(-50%, -50%) scale(1); }
  }

  /* Final text */
  #finalText {
    position: fixed;
    bottom: 12%;
    width: 100%;
    text-align: center;
    font-size: 20px;
    color: rgba(255,220,235,0.95);
    opacity: 0;
    letter-spacing: 1px;
    transition: opacity 4s ease;
    z-index: 20;
  }
</style>
</head>
<body>

<div id="portal">
  <canvas id="portalStars"></canvas>
  <img id="herImage" src="img5.jpeg" alt="Her">
</div>

<div id="finalText">I found my forever in you.</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const canvas = document.getElementById("portalStars");
  const ctx = canvas.getContext("2d");
  const herImage = document.getElementById("herImage");
  const finalText = document.getElementById("finalText");

  canvas.width = 260;
  canvas.height = 260;

  let stars = [];
  let mode = "random";
  let lineAlpha = 0;

  // Heart coordinates
  function heartPoint(t) {
    return {
      x: 16 * Math.pow(Math.sin(t), 3),
      y: -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t))
    };
  }

  function createStars(count = 120) {
    stars = [];
    for (let i = 0; i < count; i++) {
      const t = (i / count) * Math.PI * 2;
      const hp = heartPoint(t);

      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        tx: canvas.width/2 + hp.x * 6,
        ty: canvas.height/2 + hp.y * 6,
        r: Math.random() * 1.4,
        a: Math.random(),
        d: Math.random() * 0.02
      });
    }
  }

  function drawLines() {
    ctx.strokeStyle = `rgba(255,200,220,${lineAlpha})`;
    ctx.lineWidth = 0.4;

    for (let i = 0; i < stars.length; i++) {
      for (let j = i + 1; j < stars.length; j++) {
        const dx = stars[i].x - stars[j].x;
        const dy = stars[i].y - stars[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);

        if (dist < 22) {
          ctx.beginPath();
          ctx.moveTo(stars[i].x, stars[i].y);
          ctx.lineTo(stars[j].x, stars[j].y);
          ctx.stroke();
        }
      }
    }
  }

  function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    stars.forEach(s => {
      s.a += s.d;
      if (s.a <= 0 || s.a >= 1) s.d *= -1;

      if (mode === "heart") {
        s.x += (s.tx - s.x) * 0.02;
        s.y += (s.ty - s.y) * 0.02;
      }

      ctx.globalAlpha = s.a;
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fillStyle = "white";
      ctx.fill();
    });

    ctx.globalAlpha = 1;

    if (mode === "heart") {
      if (lineAlpha < 0.6) lineAlpha += 0.005;
      drawLines();
    }

    requestAnimationFrame(drawStars);
  }

  createStars();
  drawStars();

  // Heart mode after 3s
  setTimeout(() => { mode = "heart"; }, 3000);

  // Show her rounded image
  setTimeout(() => {
    herImage.style.opacity = "1";
    herImage.style.transform = "translate(-50%, -50%) scale(1)";
    setTimeout(() => {
      herImage.style.animation = "breathe 6s ease-in-out infinite";
    }, 6000);
  }, 9000);

  // Show final text
  setTimeout(() => {
    finalText.style.opacity = "1";
  }, 13000);

});
</script>
</body>
</html>